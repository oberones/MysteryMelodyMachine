[env:teensy41]
platform = teensy
board = teensy41
framework = arduino

; USB Type: MIDI mode (production)
build_flags = 
    -D USB_MIDI
    -D SCAN_HZ=1000
    -D DEBOUNCE_MS=5
    -D POT_DEADBAND=2
    -D POT_RATE_LIMIT_MS=15
    -D IDLE_TIMEOUT_MS=30000
    -D LED_BRIGHTNESS_MAX=160
    -D IDLE_BRIGHTNESS_CAP_PCT=15
    -D JOYSTICK_REARM_MS=120
    -D POT_SMOOTHING_ALPHA=64
    -D POT_LARGE_CHANGE_THRESHOLD=8
    -D POT_STABLE_TIME_MS=4
    -D DEBUG=1

; Libraries
lib_deps = 
    fastled/FastLED@^3.6.0

; Monitor settings for debugging
monitor_speed = 115200
monitor_filters = default
monitor_port = /dev/cu.usbmodem*

; Upload settings
upload_protocol = teensy-cli

[env:teensy41-debug]
platform = teensy
board = teensy41
framework = arduino

; USB Type: Serial mode for debugging (no MIDI)
build_flags = 
    -D USB_SERIAL
    -D SCAN_HZ=1000
    -D DEBOUNCE_MS=5
    -D POT_DEADBAND=2
    -D POT_RATE_LIMIT_MS=15
    -D IDLE_TIMEOUT_MS=30000
    -D LED_BRIGHTNESS_MAX=160
    -D IDLE_BRIGHTNESS_CAP_PCT=15
    -D JOYSTICK_REARM_MS=120
    -D POT_SMOOTHING_ALPHA=64
    -D POT_LARGE_CHANGE_THRESHOLD=8
    -D POT_STABLE_TIME_MS=4
    -D DEBUG=2

; Libraries
lib_deps = 
    fastled/FastLED@^3.6.0

; Monitor settings for debugging
monitor_speed = 115200

; Upload settings
upload_protocol = teensy-cli

[env:teensy41-test]
platform = teensy
board = teensy41
framework = arduino

; Test environment configuration
build_flags = 
    -D USB_SERIAL
    -D UNITY_INCLUDE_PRINT_FORMATTED

; Test dependencies
lib_deps = 
    unity

; Monitor settings
monitor_speed = 115200

; Upload settings
upload_protocol = teensy-cli

; Test configuration
test_framework = unity
test_filter = test_*
