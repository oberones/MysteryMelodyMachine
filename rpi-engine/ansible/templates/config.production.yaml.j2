# Production configuration for Mystery Music Engine on Raspberry Pi
# This file is generated by Ansible and can be customized per deployment

logging:
  level: {{ log_level | default('INFO') }}

midi:
  input_port: "{{ midi_input_port | default('auto') }}"
  output_port: "{{ midi_output_port | default('auto') }}"
  input_channel: 11
  output_channel: 1

  clock:
    enabled: false
    send_start_stop: true
    send_song_position: true

  cc_profile:
    active_profile: "generic_analog"
    parameter_smoothing: true
    cc_throttle_ms: 10

mapping:
  buttons:
    "60-69": trigger_step
  ccs:
    "27": tempo
    "21": filter_cutoff
    "22": reverb_mix
    "23": swing
    "24": density
    "25": master_volume
    "26": gate_length
    "50": sequence_length
    "51": scale_select
    "52": chaos_lock
    "53": reserved
    "60": mode
    "61": palette
    "62": drift

sequencer:
  steps: 32
  bpm: 120
  swing: 0.12
  density: 0.75
  root_note: 60
  gate_length: 0.8
  quantize_scale_changes: bar
  step_pattern: all_on
  direction_pattern: forward

scales:
  - major
  - minor
  - pentatonic_major
  - pentatonic_minor
  - mixolydian
  - blues
  - dorian

mutation:
  interval_min_s: 60
  interval_max_s: 180
  max_changes_per_cycle: 2

idle:
  timeout_ms: 45000
  ambient_profile: meditative
  fade_in_ms: 5000
  fade_out_ms: 1000
  smooth_bpm_transitions: true
  bpm_transition_duration_s: 6.0

api:
  enabled: true
  port: 8080
